<div class="product_details_container">
  <div class="product_details_card p-3">
    <div id="close">
      <img
        src="../../assets/close_button.svg"
        style="cursor: pointer"
        (click)="handleClose()"
      />
    </div>
    <div class="d-flex justify-content-between align-items-center">
      <!-- Image Section  -->
      <div class="px-3 product_img_section">
        <img
          id="product_img"
          src="{{ product.image }}"
          alt="product-image"
          style="cursor: pointer"
          class="p-0"
        />
        <div>
          <img
            id="fav_img"
            src="../../assets/{{
              (!product.isFav ? 'add_to_fav' : 'added_to_fav') + '.png'
            }}"
            (click)="handleFav()"
          />
        </div>
      </div>

      <!-- Details Section  -->
      <div class="px-3">
        <h4 style="width: 40vw">{{ product.title }}</h4>
        <p-chip [style]="{ 'margin-bottom': '5px' }">
          {{ product.category }}</p-chip
        >
        <!-- Rating -->
        <div class="rating d-flex align-items-center mb-2">
          <p-rating
            class="m-0"
            [readonly]="true"
            [cancel]="false"
            [stars]="product.rating.rate"
          >
            <ng-template pTemplate="officon">
              <img
                src="../../assets/star_rating.png"
                width="25px"
                height="25px"
              />
            </ng-template>
          </p-rating>
          <p class="m-0 px-4 text-success fw-medium mt-1">
            | {{ product.rating.count }} ratings
          </p>
        </div>

        <!-- Tag -->
        <p-tag
          [style]="{
            'background-image':
              'linear-gradient(to right, #fa709a 0%, #fee140 100%)'
          }"
          >Offer price</p-tag
        >

        <!-- Price  -->
        <div class="mt-3">
          <span class="text-danger fs-5" style="padding-right: 10px">-50%</span>

          <b class="fs-3"
            ><sup class="fs-6 fw-medium">$</sup>{{ product.price / 2 }}</b
          >
          <div class="d-flex py-2">
            <p style="padding-right: 10px">M.R.P. :</p>
            <p-tag severity="danger"
              >$<span class="text-decoration-line-through">{{
                product.price
              }}</span></p-tag
            >
          </div>

          <p
            [ngClass]="product.inStock ? 'text-success' : 'text-danger'"
            class="fw-bold fs-5 m-0 p-0"
          >
            {{ product.inStock ? "In stock" : "Out of stock" }}
          </p>

          <p class="fw-medium m-0 p-0">Inclusive of all taxes.</p>
          <p class="m-0 p-0">
            EMI starts at ${{ calculateEMI(product.price / 2, 12).toFixed(2) }}.
            No Cost EMI available
          </p>
        </div>

        <!-- Description -->
        <div class="des_box my-3">
          <p-accordion>
            <p-accordionTab header="About this item">
              <ul>
                <li>{{ product.description }}</li>
              </ul>
            </p-accordionTab>
          </p-accordion>
        </div>

        <!-- Buttons  -->
        <div class="product_action_buttons">
          <p-button
            [label]="product.inStock ? 'Buy Now' : 'Notify Me'"
            [rounded]="true"
            severity="warning"
            (click)="handleBuyNow()"
          ></p-button>
          <p-button
            label="{{
              !product.isAddedToCart ? 'Add to cart' : 'Added to cart'
            }}"
            (click)="handleAddToCart()"
            [rounded]="true"
            severity="Info"
          ></p-button>
        </div>
      </div>
    </div>
  </div>
</div>
